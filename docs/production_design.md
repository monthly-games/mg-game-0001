# Simple Tower Defense - 프로덕션 디자인 문서

> **게임 ID**: MG-0001
> **장르**: Tower Defense, Strategy
> **플랫폼**: Mobile (Android/iOS)
> **엔진**: Flutter + Flame
> **버전**: 0.2.0

---

## 1. 재미 요소 (Fun Factors)

### 1.1 핵심 재미 (Core Fun)
| 요소 | 설명 | 강도 |
|------|------|------|
| **전략적 배치** | 제한된 자원으로 최적의 타워 배치 결정 | ★★★★★ |
| **웨이브 클리어** | 점점 강해지는 적을 물리치는 성취감 | ★★★★☆ |
| **자원 관리** | 골드를 효율적으로 사용하는 계획성 | ★★★★☆ |
| **시각적 피드백** | 타워 공격, 몬스터 처치 이펙트 | ★★★☆☆ |

### 1.2 만족감 요소 (Satisfaction)
- **즉각적 보상**: 몬스터 처치 시 골드 획득 + 파티클 이펙트
- **웨이브 완료**: 웨이브 클리어 시 보너스 골드 + 화면 효과
- **챕터 클리어**: 스테이지 완료 시 별점 평가 + 보상
- **타워 업그레이드**: 강화 시 시각적 변화 + 데미지 증가

### 1.3 도전 요소 (Challenge)
```
난이도 요소:
├── 몬스터 체력/속도 증가 (웨이브별)
├── 다양한 몬스터 타입 (일반, 빠른, 탱커, 비행)
├── 제한된 골드로 타워 선택
├── 맵별 경로 변화
└── 보스 웨이브 (매 5웨이브)
```

### 1.4 사회적 요소 (Social)
- **리더보드**: 스테이지별 최고 점수 랭킹
- **주간 챌린지**: 특수 조건 클리어
- **도전과제 공유**: SNS 공유 기능

---

## 2. 게임 루프 (Game Loop)

### 2.1 코어 루프 (30초~2분)
```
┌─────────────────────────────────────────────────┐
│                    코어 루프                      │
├─────────────────────────────────────────────────┤
│  [골드 확인] → [타워 배치] → [웨이브 시작]        │
│       ↑                            ↓             │
│       └──── [몬스터 처치] ← [전투 진행] ←┘       │
└─────────────────────────────────────────────────┘
```

**단계별 상세:**
1. **골드 확인** (2초): 현재 보유 골드로 배치 가능한 타워 확인
2. **타워 배치** (10~30초): 전략적 위치에 타워 설치
3. **웨이브 시작** (1초): 시작 버튼 또는 자동 시작
4. **전투 진행** (30~90초): 타워가 자동으로 몬스터 공격
5. **몬스터 처치** (지속): 처치 시 골드 획득, 놓치면 Life 감소

### 2.2 세션 루프 (5~15분)
```
[스테이지 선택] → [웨이브 1~10 클리어] → [결과 화면] → [보상 수령]
      ↓                                        ↓
[난이도 선택]                            [다음 스테이지 해금]
```

**세션 구성:**
- 1 스테이지 = 10 웨이브
- 예상 플레이 시간: 5~10분
- 클리어 조건: 10웨이브 완료 OR Life 0

### 2.3 메타 루프 (장기)
```
┌──────────────────────────────────────────────────────┐
│                     메타 진행                         │
├──────────────────────────────────────────────────────┤
│  [스테이지 클리어] → [젬 획득] → [영구 업그레이드]     │
│         ↓                              ↓             │
│  [새 타워 해금]                  [프레스티지 보너스]   │
│         ↓                              ↓             │
│  [더 어려운 스테이지 도전] ←───────────────┘         │
└──────────────────────────────────────────────────────┘
```

### 2.4 플로우 다이어그램
```
[앱 시작]
    ↓
[메인 메뉴] ─────→ [설정]
    │              [리더보드]
    │              [도전과제]
    ↓
[스테이지 선택]
    ↓
[게임 플레이] ←──┐
    ↓           │
[웨이브 진행]   │
    ↓           │
[결과 화면] ────┤
    │           │
    ├─[재도전]──┘
    │
    └─[메인으로]
```

---

## 3. BM 모델 (Business Model)

### 3.1 수익화 전략
| 채널 | 비중 | 설명 |
|------|------|------|
| **리워드 광고** | 50% | 보상 2배, Life 회복, 골드 부스트 |
| **타워 스킨** | 20% | 비주얼 커스터마이징 (성능 영향 없음) |
| **편의 기능** | 15% | 오토 플레이, 빠른 진행 |
| **광고 제거** | 10% | 일회성 구매 |
| **스페셜 타워** | 5% | 약간 강한 타워 (±20% 이내) |

### 3.2 과금 포인트
```
비과금 유저 경험:
├── 모든 스테이지 클리어 가능
├── 기본 타워 6종 사용 가능
├── 광고 시청으로 진행 가속
└── 일일 무료 젬 획득

과금 유저 혜택:
├── 광고 제거 ($2.99)
├── 프리미엄 타워 스킨 ($0.99~$3.99)
├── 골드 부스터 패키지 ($1.99~$9.99)
└── 스페셜 타워 해금 ($4.99)
```

### 3.3 가격 정책
| 상품 | 가격 | 가치 |
|------|------|------|
| 소량 젬 (100) | $0.99 | 타워 스킨 1개 |
| 중량 젬 (500) | $3.99 | 20% 보너스 |
| 대량 젬 (1200) | $7.99 | 40% 보너스 |
| 광고 제거 | $2.99 | 영구 적용 |
| 스타터 팩 | $4.99 | 젬 500 + 스킨 2개 + 광고 제거 |

### 3.4 리텐션 메커니즘
- **일일 보상**: 출석 체크 (7일 사이클)
- **일일 퀘스트**: 4개 퀘스트 완료 시 보너스
- **주간 챌린지**: 특수 조건 스테이지
- **시즌 패스**: 무료/유료 트랙 (30일)

---

## 4. 레벨 디자인 (Level Design)

### 4.1 난이도 곡선
```
난이도
  ▲
  │                              ╭──────
  │                         ╭────╯
  │                    ╭────╯
  │               ╭────╯
  │          ╭────╯
  │     ╭────╯
  │╭────╯
  └──────────────────────────────────────→ 스테이지
    1    5    10   15   20   25   30
```

**난이도 공식:**
```
몬스터_체력 = 기본_체력 × (1 + 스테이지 × 0.15)
몬스터_수 = 기본_수 + (웨이브 × 2)
보스_체력 = 일반_몬스터_체력 × 5
```

### 4.2 콘텐츠 진행
| 스테이지 | 해금 조건 | 새로운 요소 |
|----------|----------|-------------|
| 1-5 | 시작 | 기본 타워, 일반 몬스터 |
| 6-10 | 스테이지 5 클리어 | 빠른 몬스터, 화염 타워 |
| 11-15 | 스테이지 10 클리어 | 탱커 몬스터, 감속 타워 |
| 16-20 | 스테이지 15 클리어 | 비행 몬스터, 대공 타워 |
| 21-30 | 스테이지 20 클리어 | 보스 강화, 궁극 타워 |

### 4.3 밸런싱 공식
```dart
// 타워 DPS 계산
double calculateDPS(Tower tower) {
  return tower.damage / tower.attackSpeed;
}

// 웨이브 예상 시간
double estimatedWaveTime(int wave, List<Tower> towers) {
  double totalDPS = towers.map((t) => calculateDPS(t)).sum;
  double totalHP = getWaveHP(wave);
  return totalHP / totalDPS;
}

// 골드 밸런스
int goldPerWave(int wave) => 50 + (wave * 10);
int towerCost(TowerType type) => baseCost[type] * (1 + level * 0.5);
```

### 4.4 보상 체계
| 보상 유형 | 획득 조건 | 수량 |
|-----------|----------|------|
| 웨이브 골드 | 웨이브 클리어 | 50 + 웨이브×10 |
| 처치 골드 | 몬스터 처치 | 1~5 (타입별) |
| 스테이지 젬 | 스테이지 클리어 | 10~50 (별점별) |
| 도전과제 젬 | 조건 달성 | 20~100 |

---

## 5. UI/UX 설계

### 5.1 정보 계층
```
레벨 1 (항상 표시):
├── 현재 골드
├── 남은 Life
├── 웨이브 진행 상황
└── 일시정지 버튼

레벨 2 (상호작용 시):
├── 타워 선택 메뉴
├── 타워 정보 팝업
└── 업그레이드 옵션

레벨 3 (팝업):
├── 설정 메뉴
├── 결과 화면
└── 확인 다이얼로그
```

### 5.2 네비게이션 흐름
```
[메인 메뉴]
    ├── [PLAY] → [스테이지 선택] → [게임]
    ├── [SHOP] → [상점]
    ├── [SETTINGS] → [설정]
    ├── [LEADERBOARD] → [순위표]
    └── [ACHIEVEMENTS] → [도전과제]
```

### 5.3 피드백 시스템
| 이벤트 | 시각 | 청각 | 촉각 |
|--------|------|------|------|
| 타워 배치 | 배치 애니메이션 | 클릭 사운드 | 진동 (약) |
| 몬스터 처치 | 파티클 폭발 | 처치 사운드 | - |
| 웨이브 클리어 | 화면 효과 | 팡파레 | 진동 (중) |
| Life 감소 | 화면 흔들림 | 경고음 | 진동 (강) |
| 레벨업 | 골드 이펙트 | 레벨업 사운드 | 진동 (중) |

### 5.4 접근성
- **색맹 모드**: 타워/몬스터 구분 패턴 추가
- **폰트 크기**: 3단계 조절 (소/중/대)
- **원핸드 모드**: UI 한쪽 배치 옵션
- **속도 조절**: 0.5x ~ 2x 게임 속도
- **자동 진행**: 오토 웨이브 시작 옵션

---

## 6. 프로덕션 체크리스트

### 핵심 기능
- [x] 타워 배치 시스템
- [x] 몬스터 웨이브 시스템
- [x] 골드/Life 관리
- [x] 기본 UI (HUD, 메뉴)
- [x] 타워 업그레이드 시스템
- [x] 스테이지 선택 화면
- [x] 결과 화면

### 콘텐츠
- [x] 30개 스테이지
- [x] 6종 타워 + 밸런싱
- [x] 4종 몬스터 타입
- [x] 보스 몬스터
- [x] 튜토리얼 (5단계)

### 메타 시스템
- [x] 프레스티지 시스템
- [x] 일일/주간 퀘스트
- [x] 도전과제
- [x] 설정 화면
- [ ] 리더보드 연동

### 수익화
- [ ] 광고 SDK 연동
- [ ] IAP 상품 등록
- [ ] 상점 UI
- [ ] 시즌 패스 UI

### QA/최적화
- [ ] 성능 프로파일링
- [ ] 메모리 최적화
- [ ] 배터리 소모 테스트
- [ ] 다양한 해상도 테스트
- [ ] 크래시 리포팅 연동

### 출시 준비
- [ ] 스토어 에셋 (아이콘, 스크린샷)
- [ ] 앱 설명 (한/영)
- [ ] 개인정보 처리방침
- [ ] 이용약관
- [ ] 소프트 런칭 (특정 국가)

---

## 7. KPI 목표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| D1 리텐션 | 40% | Firebase Analytics |
| D7 리텐션 | 15% | Firebase Analytics |
| D30 리텐션 | 5% | Firebase Analytics |
| 세션 길이 | 8분 | 평균 세션 시간 |
| 일일 세션 | 3회 | DAU / 세션 수 |
| ARPU | $0.10~0.15 | 총 매출 / DAU |
| 광고 시청률 | 50~60% | 광고 노출 / DAU |
| 결제 전환율 | 3~5% | 결제 유저 / DAU |

---

*마지막 업데이트: 2025-12-24*
